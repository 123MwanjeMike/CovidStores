extends ../layout.pug

block content
    .card.mb-4
        .card-header
            i.fas.fa-table.mr-1
            |    Purchases

        .card-body
                .table-responsive
                    table#dataTable.table.table-bordered(width="100%" cellspacing="0")
                        thead
                            tr     
                                th New 
                                th Name
                                th Address
                                th Telephone
                                th Email
                                th NationalID
                                th Referee
                                th Item Name
                                th Serial NO.
                                th Price
                                th Payments
                                th Date of Pay
                                th Agent
                                th Balance
                                th Next Payment
                                th Next Pay Date
                                th Receipt
                        tfoot
                            tr     
                                th New 
                                th Name
                                th Address
                                th Telephone
                                th Email
                                th NationalID
                                th Referee
                                th Item Name
                                th Serial NO.
                                th Price
                                th Payments
                                th Date of Pay
                                th Agent
                                th Balance
                                th Next Payment
                                th Next Pay Date
                                th Receipt

                        tbody
                            each detail in Transaction
                                tr
                                    td
                                        form(method="get" action='/agent/updateInstallment/'+detail._id)
                                            button(type="submit")                                          
                                                i.fas.fa-edit.mr-1
                                        br
                                        form(method="get" action='/agent/installment/'+detail._id)
                                            button(type="submit")                                          
                                                i.fas.fa-plus.mr-1

                                    td #{detail.fname} #{detail.lname}
                                    td #{detail.address}
                                    td #{detail.tel}
                                    td #{detail.email}
                                    td #{detail.NIN}
                                    td #{detail.ref}
                                    td #{detail.itemName}
                                    td #{detail.serialNo}
                                    td #{detail.price}.00ugx
                                    td 
                                        ol
                                            each installment in detail.payment
                                                li #{installment}.00ugx
                                    td
                                        ol
                                            each date in detail.DOP
                                                li=date
                                    td 
                                        ol
                                            each empId in detail.agent
                                                li=empId
                                    td #{detail.balance}.00ugx
                                    td #{detail.nextPay}.00ugx
                                    td #{detail.nDOP}
                                    td #{detail.receipt}  